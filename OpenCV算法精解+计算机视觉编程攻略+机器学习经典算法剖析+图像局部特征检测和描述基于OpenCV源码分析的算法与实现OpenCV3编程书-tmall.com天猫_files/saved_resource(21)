KISSY.add("malldetail/sku/priceExtra",function(e,t,a,i){function n(e){codeTrack("sku.priceExtra.init","trade.sku.focus");var a=e.product,n=e.el;a.onChange(["currentPriceInfo","buyPrice"],function(e,a){if(t.remove(".tm-price-extra"),e&&"TWD"===e.localCurrencySymbol){var o=t.get(".tm-price",n),r=t.create('<span class="tm-price-extra"></span>'),l="\uff08\u7d04NT\uff04",c=e.localReferencePrice/e.price,s=function(e){return Math.round(e*c*100)/100};a.min===a.max?l+=s(a.min):l+=s(a.min)+"-"+s(a.max),l+="\uff09",t.text(r,l);var d=t.create('<a class="tm-tw-price-info" href="#">?</a>');new i(d,"\u50f9\u683c\u4ee5\u70ba\u53c3\u8003\u4e4b\u7528\uff0c\u6700\u7d42\u652f\u4ed8\u50f9\u683c\u4ee5\u652f\u4ed8\u5bf6\u6536\u9280\u53f0\u70ba\u6e96",{"triggerType":"mouse","align":{"points":["bc","tc"],"offset":[0,8]},"arrow":!0,"arrowDir":"top"}),t.append(d,r),t.insertAfter(r,o)}})}return{"render":n}},{"requires":["dom","event","malldetail/common/tip"]});