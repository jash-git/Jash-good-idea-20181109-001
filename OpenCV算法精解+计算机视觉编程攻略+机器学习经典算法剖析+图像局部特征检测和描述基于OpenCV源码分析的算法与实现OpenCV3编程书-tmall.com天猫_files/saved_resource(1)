KISSY.add("mui/minicart/trip/cart",function(t,e,a,i,r,n,c,s,o){var l={};var m=0;var u="mui/minicart/trip/fullext";t.mix(l,{version:"%VERSION%",init:function(i,r){if(m){return}m++;var n=this;n.carttype=1;c.set("_fold",true);i=e.get(i);r=t.merge({},r);i.id="TMinaCart";e.addClass(i,"tm-mCart");n.el=i;var s=function(){i.innerHTML='<div class="tm-mcRoot">'+'<div class="tm-mcListBox"><div class="tm-mcListInner"><div class="tm-mcList"></div></div><div class="tm-mcFloat"></div><div class="tm-mcMask"></div></div>'+'<div class="tm-mcGenius"></div>'+'<div class="tm-mcGrace"></div>'+'<div class="tm-mcApart"></div>'+'<div class="tm-mcHandler"></div>'+"</div>";n.handlerEl=e.get("div.tm-mcHandler",i);n.listBoxEl=e.get("div.tm-mcListBox",i);n.listInnerEl=e.get("div.tm-mcListInner",i);n.listEl=e.get("div.tm-mcList",i);n.rootEl=e.get("div.tm-mcRoot",i);n.geniusEl=e.get("div.tm-mcGenius",i);n.graceEl=e.get("div.tm-mcGrace",i);n.apartEl=e.get("div.tm-mcApart",i);n.renderHandler();a.on(n.rootEl,"click",function(t){t.stopPropagation();var a=t.target;do{if(a===this){return}var i=e.attr(a,"data-tmc");if("."===i){return}if(i){if("A"===a.nodeName){t.preventDefault()}return n[i](a)}a=e.parent(a)}while(true)});a.on([n.handlerEl,n.geniusEl],"mouseenter mouseleave",function(t){if(n.g11GuideMode){return}n.frog("mouseenter"===t.type)});c.detach("numInit",s);a.on(n.listInnerEl,"mousewheel",function(t){var a=t.delta;var i=this.scrollTop;var r=e.height(this);var n=this.scrollHeight;if(r===n){return}if(a>0&&0===i||a<0&&i+r>=n){t.halt()}})};c.on("numInit",s);c.on("updateNum",function(){e[n.beChunk()?"addClass":"removeClass"](i,"tm-mcChunk")});c.numInit();n.CartModel=c},beChunk:function(){if(c.get("_counterDown")){return false}return!c.get("_listFilled")&&0===c.getNum("total")},frog:function(a){var i=this;if(a&&(!c.get("_fold")||e.hasClass(i.el,"tm-mcChunk"))){return}if(a){t.use(u)}var r=i.geniusEl;if(i.frogTimer){i.frogTimer.cancel()}i.frogTimer=t.later(function(){var i=e.get("s.tm-mcFrog",r);if(a){e.attr(r,"data-tmc","unfold");if(!i){e.append(e.create('<s class="tm-mcFrog"></s>'),r)}}else{if(i){e.remove(i)}}var n=t.Anim(r,{bottom:a?10:0},.2,"easeOutStrong",function(){if(!a){e.attr(r,"data-tmc","")}});n.run()},60)},login:function(a){var i=this;c.record("tmalljy.2.5?action=openmininotlogin&ver="+i.carttype);s.showLogin(function(){c.set("_isLogin",true);if(t.isFunction(a)){return a()}if(TB&&TB.Global&&TB.Global.writeLoginInfo){TB._isMemberInfoReady=false;TB._isLoginStatusReady=false;TB.Global.writeLoginInfo()}if(!e.get("a.tm-mcUnlogin",i.handlerEl)&&location.host.match(/(vip)\./)){location.reload();return false}i.unfold()});setTimeout(function(){t.use(u)},3600)},toggleFold:function(){if(c.get("_fold")){this.unfold()}else{this.fold()}},unfold:function(){var e=this;t.use(u,function(){e.strectch()})},fold:function(){var t=this;c.set("_fold",true);e.removeClass(t.el,"tm-mcUnFold");e.removeClass(t.el,"tm-mcCheckedShow");c.record("tmalljy.2.5?action=closemini&ver="+t.carttype);if(t.graceOff){t.graceOff()}var a=t.listBoxEl;var r=new i(a,{top:10},e.height(a)/1500,"easeOut",function(){t.listBoxEl.style.display="none"});r.run()},cart:function(){window.open(c.getApi("bcart"),"_blank")},add:function(e,a,r){var n=this;n.addData={params:t.clone(e),success:a,error:r};var s=e.anim;delete e.anim;a=a||function(){};c.set("_cached",false);c.add({data:e,success:function(e){n.renderHandler();if(s){var r=new o(t.mix({endNode:n.el},s));r.on("start",function(){n.fold()});r.on("land",function(){var t=n.geniusEl;var e=new i(t,{bottom:10},.4,"easeOutStrong",function(){var e=new i(t,{bottom:0},.3,"easeOutStrong");e.run()});e.run()});r.on("stop",function(){a(e)});r.start()}else{a(e)}},error:r||a})},invalidCache:function(){c.set("_cached",false)},loginThenAdd:function(){var t=this;t.login(function(){var e=t.addData;t.add(e.params,e.success,e.error)})},renderHandler:function(t){var a=this;var i=c.getNum("total");var r="toggleFold";var n="";if(!a.beChunk()||t){if(c.get("_listFilled")&&!a.cartDegr){n+='<span class="tm-mcCashier">';n+='<span class="tm-mcTotal"><strong class="tm-mcTotalFee">'+s.toMoney(c.get("_totalFee"),c.get("_totalCurrency"))+"</strong></span>";n+='<span class="tm-mcGo" data-tmc="go">\u7ed3 \u7b97<s></s></span>';n+="</span>"}n+='<h3><span class="tm-e1">\u8d2d\u7269\u8f66</span><span class="tm-e2">\u5df2\u9009</span><strong class="tm-mcCartNumTotal">'+i+'</strong><strong class="tm-mcCheckedNum">'+(c.get("_checkedCount")||0)+'</strong><span class="tm-e2">\u4ef6</span></h3>'}else{if(c.get("_isLogin")){n+='<a data-tmc="toggleFold"><span class="tm-mcCartNumTotal">'+i+"</a>"}else{n+='<a class="tm-mcUnlogin" data-tmc="login" title="\u767b\u5f55" href="//login.tmall.com"><span class="tm-mcCartNumTotal">'+i+"</span></a>";r="login"}}if(t){e.removeClass(a.el,"tm-mcChunk")}var o=a.handlerEl;o.innerHTML=n;e.attr(o,"data-tmc",r)}});c.on("after_counterDownChange",function(t){e[t.newVal?"addClass":"removeClass"](l.el,"tm-mcCounterDown")});c.on("after_countMaxChange",function(t){e[t.newVal?"addClass":"removeClass"](l.el,"tm-mcCountMax")});window.MiniCartModel=c;window.TMiniCart=l;return l},{requires:["dom","event","anim","ua","cookie","mui/minicart/model","mui/minicart/util","mui/minicart/fly","mui/minicart/trip/cart.css"]});KISSY.add("mui/minicart/model",function(t,e,a,r,i,n,c){var s=function(){var e=false;var a=[];var r=new Image;window["_tmcr_"+t.now()]=r;r.onload=r.onerror=function(){e=false;i()};function i(){if(e){return}var i=a.shift();if(i){e=true;r.src="//gm.mmstat.com/"+i+(i.indexOf("?")>-1?"&":"?")+t.now()}}return function(t){if(t){a.push(t);i()}}}();KISSY.config({packages:{"sd/data_sufei":{base:"//g.alicdn.com/sd/data_sufei/1.3.6/sufei",ignorePackageNameInUri:true,charset:"utf8"}}});KISSY.use("sd/data_sufei/sufei",function(t,e){});function o(){var t=this;var e=location.hostname;var a=e.match(/\b(daily|com\.hk)\b/);var r=e.match(/\.hk\b/);var i=e.match(/\.95095/);var n=e.match(/\.liangxinyao/);var c=e.match(/\.95095\.daily\.etao\.net/);t.isDaily=a;var s=a?"daily.tmall.com.hk":"tmall.hk";var l=a?"daily.tmall.net":"tmall.com";var d=a?"daily.taobao.net":"taobao.com";var m=a?"yao.95095.daily.tmall.net":"yao.95095.com";var u=a?"liangxinyao.daily.etao.net":"liangxinyao.com";var f=a?"daily.alitrip.net":"alitrip.com";if(c){m="yao.95095.daily.etao.net"}o.superclass.constructor.call(t);t.set("_checkedMax",50);t.set("_numDanger",50);var v;if(r){v=s}else if(i){v=m}else if(n){v=u}else{v=l}t.set("host:fbuy","//{hostprefix}fbuy."+v);t.set("host:cart","//{hostprefix}cart."+l);t.set("host:buy","//{hostprefix}buy."+l);t.set("host:buyYY","//{hostprefix}buy."+m);t.set("host:buyHK","//{hostprefix}buy."+s);t.set("host:buyYYZY","//{hostprefix}buy."+u);t.set("host:buyTrip","//{hostprefix}buy."+f);t.set("api:num",(a?"//count.daily.taobao.net":"//count.taobao.com")+"/counter6");t.set("api:list","{fbuy}/cart/mini/trailMiniCart.htm");t.set("api:add","{fbuy}/cart/addCartItems.do");t.set("api:del","{fbuy}/cart/mini/delMini.do");t.set("api:update","{fbuy}/cart/mini/updateMini.do");t.set("api:check","{fbuy}/cart/mini/checkMini.do");t.set("api:sss","//{hostprefix}cart."+d+"/sss.htm");t.set("api:bag","{fbuy}/auth/buyerRemoveReward.do");t.set("api:bcart","{cart}/cart/myCart.htm");t.set("api:buyTB","//{hostprefix}buy."+d+"/auction/order/confirm_order.htm");t.set("api:buy","{buy}/order/confirmOrder.htm");t.set("api:buyHK","{buyHK}/order/confirmOrder.htm");t.set("api:buyYY","{buyYY}/order/confirm_order.htm");t.set("api:buyYYZY","{buyYYZY}/order/confirm_order.htm");t.set("api:buyTrip","{buyTrip}/order/confirmOrder.htm");t.set("api:checkLogin","{buy}/login/buy.do");t.set("api:checkLoginYY","{buyYY}/login/buy.do");t.set("api:checkLoginYYZY","{buyYYZY}/login/buy.do");t.set("api:checkLoginHK","{buyHK}/login/buy.do");t.set("api:checkLoginTrip","{buy}/login/buy.do");var h=window.TB&&TB.Global&&TB.Global.setCartNum?TB.Global.setCartNum:function(){};t.on("numChange",function(){h(this.get("_counterDown")||this.get("_countMax")?false:this.getNum("total"))})}t.extend(o,a);t.augment(o,i.Target||t.EventTarget,{DATA:{},NUM:{total:0,normal:0,invalid:0,primitive:true},TYPE:{bundle:{child:"main"},main:{parent:"bundle",child:"order"},order:{parent:"main"}},setNum:function(e,a){var r={};var i=false;if(!t.isPlainObject(e)){r[e]=a}else{r=e}var n=this.NUM;t.each(r,function(t,e){if(e in n){if(t!==n[e]){i=true}n[e]=t}});n.total=n.normal+n.invalid;if(n.total>=this.get("_numDanger")){this.set("_countMax",true)}if(n.primitive){i=true;n.primitive=false}if(i){this.fire("numChange")}this.fire("updateNum")},getNum:function(e){var a=this.NUM;if(e){return a[e]}return t.clone(a)},numInit:function(){var e=this;var a=false;var r=function(){if(a){return}a=true;var r=e.get("uid");var i="TCART_234_"+r+"_q";var n=function(a){a=a||{};e.set("__totalCount__",a[i]);var r=t.isNumber(a[i]);if(!r){e.set("_counterDown",true)}e.setNum({normal:r?e.formatNum(a[i]):0,invalid:0});e.fire("numInit")};if(r){e.xhr({api:"num",data:{keys:i},complete:n})}else{n()}};if(TB&&TB.Global&&TB.Global.loginStatusReady){TB.Global.loginStatusReady(function(a){if(a.isLogin){e.set("_isLogin",true);var i=t.later(r,5e3);TB.Global.memberInfoReady(function(t){i.cancel();var a=t.memberInfo;e.set("uid",a.cookies&&a.cookies.unb?a.cookies.unb.value:"");r()})}else{e.set("uid",a.trackId);r()}})}},dump:function(){if(window.console){window.console.log(this.getAttrVals());window.console.log(this.NUM);window.console.log(this.DATA)}},getApi:function(e){var a=this;if(-1===e.indexOf(":")){e="api:"+e}var r=a.get(e);if(r){t.each(["fbuy","buy","buyHK","cart","buyYY","buyYYZY","buyTrip"],function(t){r=r.replace("{"+t+"}",a.get("host:"+t)||"")});if("api:buyTrip"===e){r=r.replace("{hostprefix}","trip")}r=r.replace("{hostprefix}",a.get("host:prefix")||"")}return r},record:s,add:function(e){var a=this;var i=0;var s=1;e=a.mixParams(e);o(e.data);l();function o(t){t.add=r.stringify(t.add);var e=a.get("_tb_token_");if(e){t._tb_token_=e}}function l(r){if(r){o(r)}else{r=e.data}a.xhr({api:"add",data:r,success:function(t){a.set("totalSize",t.cartNum);a.setNum({normal:t.cartNum,invalid:0});e.success(t)},error:function(o){if(i>=s){return}if("CsrfCheckFail"===o.errorCode&&o.tk){i++;e.data._tb_token_=o.tk;a.set("_tb_token_",o.tk);return l()}if(!o.errorCode){o.errorCode="SERVER_BUSY";o.error="\u5ba2\u5b98\uff0c\u7f51\u7edc\u62e5\u5835\uff0c\u6dfb\u52a0\u8d2d\u7269\u8f66\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"}if(o.errorCode==="BuyerNeedLogin"){var d={check:false};if(r.proxyURL){d.proxyURL=r.proxyURL}if(!c.show){c=new c}c.show(function(){var c=r.getParams;if(o.tk){e.data._tb_token_=o.tk;a.set("_tb_token_",o.tk)}if(t.isFunction(c)){n.when(c(),function(t){i++;return l(t)})}else{i++;return l()}},d)}else{e.error(o)}}})}},xhr:function(a){var r=this;a=t.merge({data:{},type:"get",success:function(){},error:function(){},complete:function(){},wait:function(){},needMerge:false,timeout:5},a);var i=r.getApi(a.api);var n=t.later(function(){a.wait()},360);var c=function(e){n.cancel();a.responseData=e;r.onXhrResponse(a);var i=r.get("uid");if(a.api==="num"&&!i){t.each(e,function(t,e){if(t<0){r.record("tmalljy.2.5?action=tair-error")}})}};var s=a.data;var o=r.get("_tpId");if(o){s.tpId=o}a.data=s;var l=this.get("division");if(l&&l.code){i+="?divisionCode="+l.code}if(a.api==="list"){KISSY.use("sd/data_sufei/sufei",function(t,r){new e(r({url:i,data:s,success:c,dataType:"jsonp",crossDomain:true,cache:false,timeout:a.timeout},{style:"taobao"}))});return}if("get"===a.type){e({url:i,type:"get",scriptCharset:a.scriptCharset||"gbk",data:s,dataType:"jsonp",complete:c,timeout:a.timeout})}else{r.useProxy(function(t){t.post(i,s,c,a.timeout)})}},onXhrResponse:function(e){var a=this;var i=e.responseData;if(!t.isPlainObject(i)){i={success:false}}var n=i.globalData;var c;if(n){c=n.sss;a.set("_isLogin",n.login);if(!a.get("host:prefix")&&n.hostPrefix){a.set("host:prefix",n.hostPrefix+".")}if(n.cartUrl){a.set("api:bcart",n.cartUrl)}}try{c=c||r.parse(i.sss);if(t.isPlainObject(c)&&"quantity"in c){t.getScript(a.getApi("sss")+"?quantity="+c.quantity+"&tk="+c.token+"&"+t.now())}}catch(s){}if(i.success){if(e.needMerge){a.set(n);a.merge(i.list)}if(n&&n.bundRela){a.mergeBundleRelaPromo(n)}e.success(i);if(e.needMerge){a.calculate()}}else{e.error(i)}e.complete(i)},formatNum:function(t){t-=0;return t>0?t:0},read:function(t,e,a){if(!t){return null}var r;e=e.split("/");while(r=e.shift()){if(r in t){t=t[r]}else{return a}}return t},mixParams:function(e,a){return t.merge({success:function(){},error:function(){}},a,e)},useProxy:function(e){var a=this;t.use("mui/minicart/proxy",function(t,r){r.init(a.getApi("host:fbuy")+"/cart/mini/proxy.htm",function(){});if(e){e(r)}})}});return new o},{requires:["ajax","base","json","event","promise","mui/minilogin/"]});window.MLoginTimer=0,window.MLoginShow=0,KISSY.add("mui/minilogin/index",function(o,e,n){function i(o){var e=document.createElement("a");return e.href=o,e.hostname===location.hostname}var t,a=function(o){var e=location.hostname.split(".");return e.splice(e.length-o>0?e.length-o:0,o).join(".")}(2),l=location.hostname.indexOf(".net")>=0||location.hostname.indexOf(".com.hk")>=0,c=l?"daily.taobao.net":"taobao.com",r=l?"daily.tmall.net":"tmall.com",m=l?"daily.tmall.com.hk":"tmall.hk",d="assets_css=3.0.10/login_pc.css",s="//login."+c+"/member/login.jhtml?style=miniall&newMini2=true&enup=true&from=tmall&allp="+escape(d),w=window.location.protocol,g={"check":!0,"needRedirect":!1,"sub":!1,"proxy":{"tmall":w+"//vip."+r+"/miniLoginProxy.htm","hk":w+"//www."+m+"/loginproxy.htm","yao":w+"//yao.95095.com/go/rgn/95095/loginproxy.php","etao":w+"//vip.daily.tmall.net/miniLoginProxy.htm","liangxinyao":w+"//alihealthyao.liangxinyao.com/markets/lxyao/proxy"}},h={"show":function(e,n){window.goldlog&&window.goldlog.send("//log.mmstat.com/tmallmember.9.2",{}),h.Analytics.MLstar=1*new Date;var i=this;"function"!=typeof e&&(n=e,e=null),n=o.merge(g,n);var t=new Date;t.setDate(t.getDate()-1),document.cookie="cookie2=;expires="+t.toGMTString()+";path=/;domain=.tmall.com",!1===n.check?this._show(e,n):this._check(function(t){h.Analytics.MLcheckStar=1*new Date,t?(window.MLoginShow<=1&&!o.UA.mobile&&window.TB&&TB.Global&&TB.Global.updateLoginInfo(),e&&e(),window.MLoginShow+=1):i._show(e,n)},n)},"_checkPage":function(){return window.TB&&window.TB.userInfo&&window.TB.userInfo.isLogin},"_check":function(e,n){h.Analytics.MLcheckStar=1*new Date;var i=this,t=n.checkTimeout||5,a=!1,l=o.later(function(){a||e(i._checkPage()),l&&l.cancel()},1e3*t);return n&&n.checkApi&&-1==n.checkApi.indexOf(".tmall.")&&(n.checkApi=undefined),o.io({"type":"get","url":n.checkApi?n.checkApi:"//miaoxin."+r+"/member/user_login_info2.do","success":function(o){if(h.Analytics.MLcheckEnd=1*new Date,o=o||{},1111==o.status)return a=!0,void e(i._checkPage());a=!0,e(o.login)},"error":function(){a=!0,e(i._checkPage())},"timeout":t,"dataType":"jsonp","charset":"utf-8","cache":!1,"headers":{"X-Requested-With":!1}})},"_show":function(n,l){if(h.Analytics.MLshowStar=1*new Date,window.MLoginTimer+=1,l.insert&&(window.MLoginTimer=0),!(window.MLoginTimer>1)){var r,m=s,d="",w=window.location.hostname,g="";if(o.UA.mobile)return d=window.location.href,m="//login."+c+"/member/login.jhtml?redirectURL="+encodeURIComponent(d),window.location.href=m,window.MLoginTimer=0,!1;if(l.needRedirect){var u=l.redirectUrl?l.redirectUrl:location.href.split("#")[0];m+="&full_redirect=true&tpl_redirect_url="+encodeURIComponent(u)}else r="g_tml_callbak"+(new Date).getTime(),window[r]=function(){var o=window.TB||{};t&&t.hide(),o&&o.Global&&o.Global.updateLoginInfo(),window.MLoginTimer=0,window.MLoginShow+=1,n&&n.apply(this,arguments);try{delete window[r]}catch(e){}},l.proxyURL?d+=l.proxyURL:w.indexOf(".hk")>=0?d+=l.proxy.hk:w.indexOf("95095.com")>=0?d+=l.proxy.yao:w.indexOf("95095.daily.etao.net")>=0?d+=l.proxy.etao:w.indexOf("liangxinyao.com")>=0?d+=l.proxy.liangxinyao:d+=l.proxy.tmall,d+=(d.indexOf("?")>0?"&":"?")+"callback="+r,i(d)||document.domain===a||(document.domain=a),i(d)&&document.domain===location.hostname&&(d+="&nsdomain=true"),m+="&full_redirect=false&tpl_redirect_url="+encodeURIComponent(d);if(l.sub&&(m+="&sub=true"),window.g_config&&window.g_config.moduleTimeStamp&&window.g_config.moduleTimeStamp.minilogin&&(m+="&t="+window.g_config.moduleTimeStamp.minilogin),g='<iframe class="j_minilogin_iframe" style="background: rgb(250, 250, 250);" width="350" scrolling="no" height="400" frameborder="no" src="'+m+'"></iframe>',l.insert)return void o.all(l.insert).append(g);t=new e({"width":350,"height":436,"bodyContent":g,"mask":!0,"showCat":!0,"zIndex":999999,"align":{"points":["cc","cc"]}}),t.render(),t.show();var f=o.version.indexOf("1.3")>=0,p=o.all(f?t.__attrVals.el:t.$el),y=f?".mui-stdmod-body":".mui-dialog-body",k=f?".mui-ext-close":".mui-dialog-close",x=p.all(".j_minilogin_iframe");x.parent(y).style("background-color","#FAFAFA"),h.Analytics.MLshowEnd=1*new Date;x.parent(".mui-dialog").addClass("my-minilogin-dialog"),p.all(k).on("click",function(){l.closeCallback&&l.closeCallback(),window.MLoginTimer=0,t.destroy()}),x.on("load",function(){h.Analytics.MLloaded=1*new Date,h.sendTrack()})}},"Analytics":{},"sendTrack":function(){if(window.performance&&(!window.performance||window.performance.getEntriesByType)){for(var o,e=0,n=window.performance.getEntriesByType("resource");e<n.length;e++)if("iframe"==n[e].initiatorType&&n[e].name.indexOf("https://login.taobao.com/member/login.jhtml")>=0){o=n[e];break}if(o){var i=[];for(var t in o)i.push(t+"="+("name"==t?"//login.taobao.com":o[t]));for(var t in h.Analytics)i.push(t+"="+h.Analytics[t]);i.push("MLtype=minilogin");var a=["[uhttp://login.tmall.com/track/0.2.0/]","[r10]"].join(""),l=document.cookie.match(/_nk_\=([^\;]*); /),c=l&&l[1]||"",r="//gm.mmstat.com/ued.1.1.2?type=9&id=jstracker&v=0.02&nick="+encodeURIComponent(c)+"&msg="+a+escape(i.join("&"));(new Image).src=r}}}};return h},{"requires":["mui/overlay/dialog","io","mui/minilogin/index.css"]});KISSY.add("mui/overlay/dialog",function(e,t){function i(t){var n=this;n.config=e.merge(i.Config,t);n.config.elCls=n.config.elCls||"";n.config.elCls+=n.config.skin?" mui-dialog-"+n.config.skin:"";if(n.config.mask){n.config.elCls+=" mui-dialog-hasmask"}i.superclass.constructor.call(this,n.config);var s=true;function o(){var t=n.get("el"),i=e.UA.ie<8?"style='height:expression(this.parentNode.clientHeight);'":"";t.append("<div class='mui-dialog-skin' "+i+"></div>"+(n.config.showCat?"<i class='mui-dialog-cat'></i>":""));s=false}n.on("afterRenderUI",function(){o()});if(n.get("initRender")){n.render()}}i.Config={prefixCls:"mui-",showCat:true,zIndex:99999,initRender:false};e.extend(i,t.Dialog);e.augment(i,{setBodyContent:function(e){var t=this;t.set("bodyContent",e);t.render()},setHeaderContent:function(e){var t=this;t.set("headerContent",e);t.render()},setFooterContent:function(e){var t=this;t.set("footerContent",e);t.render()}});if(e.version.match(/^1\.[123]/)){e.getScript(location.protocol+"//g.alicdn.com/mui/overlay/1.0.6/overlay.css")}return i},{requires:["overlay","mui/overlay/overlay.css","mui/button/btn.css","mui/button/btn-tb.css","mui/msg/msg.css"]});KISSY.add("mui/minicart/util",function(t,e){var r={};t.mix(r,{toMoney:function(t,r){function i(){var t=false;if(/chaoshi/.test(location.host)){t=true}if(window.g_config&&window.g_config.bizId==="chaoshi"){t=true}return t}if(i()&&e.get("#J_NavCart")&&!e.get("#J_NavCart_rmbStyle")){var a=e.create('<style id="J_NavCart_rmbStyle">.tm-mcTotal .tm-mcRmb{display:none;} .tm-mcTotalFee,.tm-mcOrder .tm-mcPrice{font-family: verdana, arial;}</style>');e.append(a,e.get("#J_NavCart"))}if(isNaN(parseFloat(t,10))){return t}if("number"!==typeof t){t=t-0}var n=100;var c="&yen";if(r){n=r.unitFactor||n;c=r.symbol||c}t=t/n;return isNaN(t)?"":c+t.toFixed(2)},toWeight:function(t){if("number"!==typeof t){t=t-0}t/=1e3;return t||0},toTxt:function(t){var r=document.createElement("div");r.innerHTML=t;return e.text(r).replace(/\s+/g,"")},showLogin:function(e){t.use("mui/minilogin/",function(t,r){if(!r.show){r=new r}r.show(e)})}});return r},{requires:["dom"]});KISSY.add("mui/minicart/fly",function(e,t,r,i){function o(t){this.params=e.merge({offset:{}},t)}e.augment(o,r.Target||e.EventTarget,{start:function(){var r=this;var o=r.params;var a=t.get(o.endNode);var f=t.offset(a);var n=t.get(o.startNode);var s=t.offset(n);var d=o.img;var p=t.create("<div></div>",{html:d?'<img src="'+d+'" height="40" />':"",css:{position:"absolute",zIndex:1e6,border:"2px solid #980101",background:"#fff",width:40,height:40,padding:2,textAlign:"center",overflow:"hidden",left:s.left,top:s.top}});t.prepend(p,document.body);var v=.7;var l=Math.ceil((f.top-s.top)/100);if(1===l){v=.3}else if(2===l){v=.4}else if(3===l){v=.5}else if(4===l){v=.6}var u=e.merge({top:45,left:25},o.offset);var g=new i(p,{top:f.top-u.top-30,left:f.left+t.outerWidth(a)/2-u.left},v,"easeOut",function(){r.fire("land");var e=new i(p,{top:f.top,height:20,opacity:.5},.5,"easeOut",function(){t.remove(p);r.fire("stop")});e.run()});r.fire("start");g.run()}});return o},{requires:["dom","event","anim"]});KISSY.add("mui/bottombar/bottombar",function(t,o,e){var r,i,n=t.UA.ie==6;function a(){o.addStyleSheet("#J_CommonBottomBar{position:fixed;bottom:0;right:0;z-index:100002;_position:absolute;_bottom:auto;}"+"#J_CommonBottomBar td{vertical-align:bottom;_position:relative;_overflow:hidden}"+'.tm_cmbar_clearfix::after {clear: both;}.tm_cmbar_clearfix::after, .tm_cmbar_clearfix::before{display: table;content: "";overflow: hidden;}.tm_cmbar_clearfix {zoom: 1;}'+"#J_CommonBottomBar .tm_cmbar{position:relative;}");r=o.create('<table id="J_CommonBottomBar"><tr><td order="0"></td></tr></table>');o.hide(r);setTimeout(function(){document.body.appendChild(r)},n?40:0);var t=0;function e(){if(t>150){return}if(o.get("#tstart .tstart-toolbar")){o.css(r,{right:"54px"});return}t++;setTimeout(e,200)}e()}function d(){if(i){return}i=setTimeout(function(){var t=document.body.scrollTop||document.documentElement.scrollTop||0;var e=document.body.scrollWidth-document.body.clientWidth>0?20:0;var n=t+o.viewportHeight(document)-o.height(r)-e;o.css(r,"top",n);i=null},64)}return{add:function(t,e){if(!r){a()}e=e||{};t=o.get(t);o.addClass(t,"tm_cmbar_clearfix");var i=e.order||o.attr(t,"order")||0,n=r.rows[0],d=n.cells,m;for(var s=0;s<d.length;s++){if(o.contains(d[s],t)){return}if(i<(o.attr(d[s],"order")||0)){m=n.insertCell(s);break}}if(!m){m=n.insertCell(-1)}o.attr(m,"order",i);o.addClass(t,"tm_cmbar");o.append(t,m);this.refresh()},remove:function(t){o.remove(t);this.refresh()},show:function(){o.show(r);if(n){e.on(window,"scroll",d);e.on(window,"resize",d);setTimeout(d,32)}},hide:function(){o.hide(r);if(n){e.remove(window,"scroll",d);e.remove(window,"resize",d)}},refresh:function(){if(r.firstChild){this.show()}else{this.hide()}if(n){setTimeout(d,32)}}}},{requires:["dom","event"]});